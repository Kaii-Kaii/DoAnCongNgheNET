-- Tạo cơ sở dữ liệu
CREATE DATABASE QLCH_Xe;
USE QLCH_Xe;

-- Tạo bảng NHACUNGCAP và chèn dữ liệu
CREATE TABLE NHACUNGCAP(
    MA_NCC CHAR(6) PRIMARY KEY,
    TEN_NCC NVARCHAR(100) NOT NULL
);
INSERT INTO NHACUNGCAP (MA_NCC, TEN_NCC) 
VALUES 
('NCC001', N'Honda Việt Nam'),
('NCC002', N'Yamaha Motor Việt Nam'),
('NCC003', N'Suzuki Việt Nam'),
('NCC004', N'Piaggio Việt Nam'),
('NCC005', N'SYM Việt Nam');

-- Tạo bảng LOAISANPHAM và chèn dữ liệu
CREATE TABLE LOAISANPHAM(
    MA_LOAI CHAR(7) PRIMARY KEY,
    TENLOAI NVARCHAR(100) NOT NULL
);
INSERT INTO LOAISANPHAM (MA_LOAI, TENLOAI) 
VALUES 
('LOAI001', N'Xe tay ga'),
('LOAI002', N'Xe số'),
('LOAI003', N'Xe côn tay');

-- Tạo bảng SANPHAM và chèn dữ liệu
CREATE TABLE SANPHAM(
    MA_SP CHAR(6) PRIMARY KEY,
    TEN_SP NVARCHAR(100) NOT NULL,
    MOTA_SP NVARCHAR(255),
    SOLUONG_SP INT NOT NULL,
    GIA_BAN DECIMAL(18,2) NOT NULL,
    GIA_NHAP DECIMAL(18,2) NOT NULL,
    TGBAOHANH INT NOT NULL,
    ANH_SP NVARCHAR(200),
    MA_LOAI CHAR(7) NOT NULL,
    FOREIGN KEY (MA_LOAI) REFERENCES LOAISANPHAM(MA_LOAI)
);
INSERT INTO SANPHAM (MA_SP, TEN_SP, MOTA_SP, SOLUONG_SP, GIA_BAN, GIA_NHAP, TGBAOHANH, ANH_SP, MA_LOAI)
VALUES
('SP001', N'Vision 2024', N'Xe tay ga Honda', 50, 35000000, 30000000, 24, 'image1.png', 'LOAI001'),
('SP002', N'Air Blade 2024', N'Xe tay ga Honda', 40, 45000000, 40000000, 24, 'image2.png', 'LOAI001'),
('SP003', N'Exciter 150', N'Xe côn tay Yamaha', 30, 50000000, 47000000, 24, 'image3.png', 'LOAI003'),
('SP004', N'Sirius 2024', N'Xe số Yamaha', 60, 25000000, 22000000, 18, 'image4.png', 'LOAI002'),
('SP005', N'Janus 2024', N'Xe tay ga Yamaha', 40, 32000000, 29000000, 24, 'image5.png', 'LOAI001'),
('SP006', N'Piaggio Liberty', N'Xe tay ga Piaggio', 20, 60000000, 55000000, 24, 'image6.png', 'LOAI001'),
('SP007', N'Piaggio Vespa', N'Xe tay ga Piaggio', 15, 80000000, 75000000, 24, 'image7.png', 'LOAI001'),
('SP008', N'SYM Galaxy', N'Xe số SYM', 50, 20000000, 18000000, 18, 'image8.png', 'LOAI002'),
('SP009', N'SYM Elegant', N'Xe số SYM', 60, 18000000, 16000000, 18, 'image9.png', 'LOAI002'),
('SP010', N'Suzuki Raider', N'Xe côn tay Suzuki', 25, 51000000, 47000000, 24, 'image10.png', 'LOAI003');

-- Tạo bảng KHACHHANG và chèn dữ liệu
CREATE TABLE KHACHHANG (
    SDT_KH CHAR(10) PRIMARY KEY,
    TENKH NVARCHAR(100) NOT NULL,
    DIACHI_KH NVARCHAR(255),
    MAIL NVARCHAR(100)
);
INSERT INTO KHACHHANG (SDT_KH, TENKH, DIACHI_KH, MAIL)
VALUES
('0901234567', N'Nguyễn Văn A', N'123 Phố Huế, Hà Nội', 'vana@gmail.com'),
('0912345678', N'Trần Thị B', N'456 Lê Lợi, TP.HCM', 'thib@gmail.com'),
('0923456789', N'Lê Văn C', N'789 Trần Hưng Đạo, Đà Nẵng', 'vanc@gmail.com'),
('0934567890', N'Phạm Văn D', N'321 Lý Thái Tổ, Hải Phòng', 'vand@gmail.com'),
('0945678901', N'Ngô Thị E', N'654 Nguyễn Huệ, Nha Trang', 'thie@gmail.com');

-- Tạo bảng NHANVIEN và chèn dữ liệu
CREATE TABLE NHANVIEN (
    MA_NV CHAR(6) PRIMARY KEY,
    TENNV NVARCHAR(100) NOT NULL,
    GIOITINH NVARCHAR(3) NOT NULL,
    CHUCVU NVARCHAR(50),
    SDT_NV CHAR(10),
    NGAYSINH DATE,
    DIACHI_NV NVARCHAR(255)
);
INSERT INTO NHANVIEN (MA_NV, TENNV, GIOITINH, CHUCVU, SDT_NV, NGAYSINH, DIACHI_NV)
VALUES
('NV010', N'hi', N'Nam', N'Nhân viên bán hàng', '0987654321', '2000-09-09', N'Cao Bằng'),
('NV001', N'Trần Văn A', N'Nam', N'Quản lý', '0909876543', '1985-05-15', N'123 Hoàng Diệu, Hà Nội'),
('NV002', N'Nguyễn Thị B', N'Nữ', N'Nhân viên bán hàng', '0918765432', '1990-11-20', N'234 Hùng Vương, TP.HCM'),
('NV003', N'Lê Văn C', N'Nam', N'Nhân viên kỹ thuật', '0927654321', '1988-09-30', N'456 Trần Phú, Đà Nẵng');

-- Tạo bảng TAIKHOAN_NV và chèn dữ liệu
CREATE TABLE TAIKHOAN_NV (
    MA_NV CHAR(6) PRIMARY KEY,
    PASS NVARCHAR(50) NOT NULL,
    IS_ACTIVE BIT DEFAULT 1,
    FOREIGN KEY (MA_NV) REFERENCES NHANVIEN(MA_NV)
);
INSERT INTO TAIKHOAN_NV (MA_NV, PASS)
VALUES
('NV010', 'NV09'),
('NV001', '111111'),
('NV002', '101010'),
('NV003', '123123');

-- Tạo bảng HD_NHAP và chèn dữ liệu
CREATE TABLE HD_NHAP (
    MAHD_NHAP CHAR(8) PRIMARY KEY,
    MA_NCC CHAR(6) NOT NULL,
    MA_NV CHAR(6) NOT NULL,
    TONGBILL_NHAP DECIMAL(18,2),
    NGAYNHAP DATE NOT NULL,
    FOREIGN KEY (MA_NCC) REFERENCES NHACUNGCAP(MA_NCC),
    FOREIGN KEY (MA_NV) REFERENCES NHANVIEN(MA_NV)
);
INSERT INTO HD_NHAP (MAHD_NHAP, MA_NCC, MA_NV, TONGBILL_NHAP, NGAYNHAP)
VALUES
('HDN007', 'NCC001', 'NV001', 1000, '2024-12-25'),
('HDN002', 'NCC001', 'NV001', 100000, '2024-10-25'),
('HDN003', 'NCC002', 'NV002', 200000, '2024-10-26'),
('HDN004', 'NCC003', 'NV002', 45000, '2024-10-27'),
('HDN005', 'NCC004', 'NV003', 457000, '2024-10-28'),
('HDN006', 'NCC005', 'NV001', 1237680, '2024-10-29');

-- Tạo bảng CTHD_NHAP và chèn dữ liệu
CREATE TABLE CTHD_NHAP (
    MAHD_NHAP CHAR(8),
    MA_SP CHAR(6),
    SL_NHAP INT NOT NULL,
    GIA_SP DECIMAL(18,2),
    FOREIGN KEY (MAHD_NHAP) REFERENCES HD_NHAP(MAHD_NHAP),
    FOREIGN KEY (MA_SP) REFERENCES SANPHAM(MA_SP)
);
INSERT INTO CTHD_NHAP (MAHD_NHAP, MA_SP, SL_NHAP, GIA_SP)
VALUES
('HDN006', 'SP001', 20, NULL),
('HDN002', 'SP002', 10, NULL),
('HDN003', 'SP003', 15, NULL),
('HDN004', 'SP004', 5, NULL),
('HDN005', 'SP005', 8, NULL);

-- Tạo bảng HD_XUAT_BAOHANH và chèn dữ liệu
CREATE TABLE HD_XUAT_BAOHANH (
    MAHD_XUAT CHAR(8) PRIMARY KEY,
    SDT_KH CHAR(10) NOT NULL,
    MA_NV CHAR(6) NOT NULL,
    NGAYXUAT DATE,
    TONGBILL_XUAT DECIMAL(18,2),
    FOREIGN KEY (SDT_KH) REFERENCES KHACHHANG(SDT_KH),
    FOREIGN KEY (MA_NV) REFERENCES NHANVIEN(MA_NV)
);
INSERT INTO HD_XUAT_BAOHANH (MAHD_XUAT, SDT_KH, MA_NV, NGAYXUAT, TONGBILL_XUAT)
VALUES
('HDX007', '0901234567', 'NV001', '2024-12-25', 1234),
('HDX002', '0912345678', 'NV002', '2024-10-25', 200000),
('HDX003', '0934567890', 'NV003', '2024-10-26', 450000);

-- Tạo bảng CTHD_XUAT và chèn dữ liệu
CREATE TABLE CTHD_XUAT (
    MAHD_XUAT CHAR(8),
    MA_SP CHAR(6),
    SL_XUAT INT NOT NULL,
    TG_BAOHANH INT,
    GIA_SP DECIMAL(18,2),
    FOREIGN KEY (MAHD_XUAT) REFERENCES HD_XUAT_BAOHANH(MAHD_XUAT),
    FOREIGN KEY (MA_SP) REFERENCES SANPHAM(MA_SP)
);
INSERT INTO CTHD_XUAT (MAHD_XUAT, MA_SP, SL_XUAT, TG_BAOHANH, GIA_SP)
VALUES
('HDX002', 'SP002', 2, NULL, NULL),
('HDX003', 'SP003', 1, NULL, NULL);
